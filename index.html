<!doctype html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.9.0/css/ol.css" type="text/css">
    <script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.9.0/build/ol.js"></script>
    <link rel="stylesheet" href="index.css">
    </link>

    <title>OpenLayers Odev</title>
</head>

<body>
    <h2 class="header">Belsis Yaz覺l覺m</h2>
    <div id="map" class="map"></div> <!-- Ekrana harita bast覺ld覺 -->
    <label for="type" class="parselTypeLabel">Geometry type:</label>
    <select class="parselBtn" id="type">
        <option class="parselOption" value="Polygon">Polygon</option>
        <option class="parselOption" value="Point">Point</option>
        <option class="parselOption" value="LineString">LineString</option>
    </select>
</body>
<script type="text/javascript">

    const raster = new ol.layer.Tile({
        source: new ol.source.OSM(),
    });

    const kaynak = new ol.source.Vector();

    const vector = new ol.layer.Vector({
        source: kaynak,
        style: new ol.style.Style({
            fill: new ol.style.Fill({
                color: 'rgba(255, 255, 255, 0.2)',
            }),
            stroke: new ol.style.Stroke({
                color: '#ffcc33',
                width: 2,
            }),
            image: new ol.style.Circle({
                radius: 7,
                fill: new ol.style.Fill({
                    color: '#ffcc33',
                }),
            }),
        }),
    });

    const modify = new ol.interaction.Modify({ source: kaynak });

    var map = new ol.Map({
        target: 'map',
        layers: [
            new ol.layer.Tile({
                source: new ol.source.OSM()
            }), raster, vector
        ],
        view: new ol.View({
            center: ol.proj.fromLonLat([37.41, 8.82]),
            zoom: 4
        })
    });

    map.addInteraction(modify);

    let draw, snap; // global so we can remove them later
    const typeSelect = document.getElementById('type');

    typeSelect.onchange = function () {
        map.removeInteraction(draw);
        map.removeInteraction(snap);
        addInteractions();
    };

    function addInteractions() {
        draw = new ol.interaction.Draw({
            source: kaynak,
            type: typeSelect.value,
        });
        map.addInteraction(draw);
        snap = new ol.interaction.Snap({ source: kaynak });
        map.addInteraction(snap);
    }
    addInteractions()
</script>

</html>